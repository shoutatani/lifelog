# lifelogs from 2020/04/27 to 2020/05/03

## weekly report

* REST API以外のアーキテクチャを少し知るだけで、他の世界が広いことが認識できた。が、それ以上に組織とビジネスにマッチしたアーキテクチャ選定にはもっと上の次元からの考察が必要そうだ、と力不足もまた認識した。

* 前々から持っていたRaspberry Piを使って、LピカやLチカ、はたまたBME280センサーでI2Cによるシリアル通信も経験できたIoT weekだった。Raspberry Pi 2では、rbenvでRubyのインストールに1時間はかかったので、スペックの高いマシンって幸せだなーって思えた。2020年にして。

## daily reports

### 2020/04/27

* クレープを作って食べた・・・が、食べすぎて苦しんだ。
* ダイオード(半導体)の逆方向バイアスについて理解がいまいち及ばなかった。電位について更に理解を深めなければいけないが、これ以上進むと戻ってこれなくなりそうなので、学習対象のスコープを逸脱しないようにする。

### 2020/04/28

* Vercel(Zeit)のサイトのどこを見てもnowという記述が無くて(無くなって?)、そのままVercelと呼べばいいのかどうか悩んだ。。。

### 2020/04/29

* [マイクロサービスにおけるWeb APIスキーマの管理 ─ GraphQL、gRPC、OpenAPIの特徴と使いどころ](https://employment.en-japan.com/engineerhub/entry/2019/08/22/103000) を読んでみた。
  * OpenAPIについて詳しく知らなかったので、[OpenAPI (Swagger) の基本的なあれこれ](https://girigiribauer.com/tech/20190318/) を読んで、スキーマの記述の方法などをぱらぱらっと読んでみた。インターフェース定義をコード化でき、バックエンドチーム、フロントエンドチームでパラレルで開発する際に役に立つのかな？という所感。
    > OpenAPIは、OpenAPI Initiativeが策定しているREST APIのインタフェースを記述する仕様です。かつてはSwaggerと呼ばれていましたが、Swaggerのバージョン2.0がOpenAPI Initiativeに寄贈された後、OpenAPI 2.0という名称に変更されました。
  * gRPC, GraphQLについても言及されていたので、まずgRPCを下記の通り触ってみた。

* [モノリシックとマイクロサービスの共存 メルカリWeb開発チームの挑戦](https://logmi.jp/tech/articles/320191) も読んでみた。
  * BFF層を用意して、バックエンドチームとフロントエンドチームの責務の境界を作ると良い的なことを読み取れた。
  * 理想的なBFFスタイルのアーキテクチャとは？という気持ち。

* gRPC事始め。
  * gRPCの公式、[Ruby Quick Start](https://www.grpc.io/docs/quickstart/ruby/) に従って、.protoファイル(Protocol Buffersのための定義ファイル)を編集し、Ruby用のフォーマットをGenerateし、サーバー実装、クライアント実装をそれぞれ実行することで、実際にやりとりしているのを確認。
    * .protoファイルをコンパイルすることで、Protocol Buffers形式でやりとりするためのインターフェースを規定した.rbファイルを作ってくれる。
    * その.rbファイルをサーバーサイド、クライアントサイドでそれぞれ組み込むことで、.protoで定義したインターフェースの実装・呼び出しが可能になる。
  * 所感
    * 便利だ・・・(語彙力)。
    * 複数言語同士でやりとりするのに良さそう(語彙力)。
    * REST APIでの型の強い意識をしなくても良くなり、開発速度が上がりそう。

### 2020/04/30

* [クラウドファンディングサイト](https://readyfor.jp/projects/kosugi-silkmask)で、地元の企業がシルクを使ったマスクを出していたので支援してみた。

* 新しいデジタルマルチメーター(電圧計とか)がほしいなと思いつつAmazonを見ていたけど、高頻度で使っているわけでもないので、昔に車とかバイク用に買ったデジタルマルチメーターを復活させて(新しい9V電池を入れて)やることにした。測定機器をしっかり持って初めて電子工作とか電気工作を安心してできるから、測定機器は大事。
  * まぁ、本当は新しいデジタルマルチメーターだけじゃなくて、オシロスコープも欲しいんだけれども。

### 2020/05/01

* S3のMulti-part Upload、Rubyの古いSDK(gem)からだと厳しそう？この辺りの知識を深めたい。

### 2020/05/02

* RaspberryPiでLチカ(LEDを点灯)させてみた！
  * 仮想デバイス経由で。無事できた。
* RaspberryPiでLピカ(LEDを点滅)させてみた！
  * visudo起動したときにnanoエディターになっており、vimじゃなかったので何をどうすればいいか一発でわからなかった。。。
    * `sudo update-alternatives --config editor` でvimに切り替えた。
  * sudoersのsecure_pathを触ったが、あまりよく分かっていないので復習しておくこととする。

### 2020/05/03

* BOSCH製のBME280センサーを搭載した湿度・温度・気圧計にRaspberry PiからI2Cインターフェース経由でアクセスし、無事それらの値を取得できた。
  * [データシート](https://ae-bst.resource.bosch.com/media/_tech/media/datasheets/BST-BME280-DS002.pdf)はあるが、[すでにこれに従ったrubyの実装をしてくれていた方がいた](https://github.com/lukasjapan/i2c-bme280)ので、それを利用して値を取得した。
  * 余裕が出てくれば、データシートを読み込んで自分なりに実装してみたい・・・が、今そこにリソースを投下するときではないので、また今度。
  * UARTとかI2Cとかのシリアル通信、物理層を意識したエンジニアリング、楽しい！
